!function(o){o.module("Jsonapi.config",[]).constant("rsJsonapiConfig",{url:"http://yourdomain/api/v1/"}),o.module("Jsonapi.services",[]),o.module("rsJsonapi",["angular-storage","Jsonapi.config","Jsonapi.services"])}(angular);
var Jsonapi;!function(e){var t=function(){function t(e,t,n){this.$http=e,this.rsJsonapiConfig=t,this.$q=n}return t.$inject=["$http","rsJsonapiConfig","$q"],t.prototype["delete"]=function(e){return this.exec(e,"DELETE")},t.prototype.get=function(e){return this.exec(e,"GET")},t.prototype.exec=function(t,n,o){var i={method:n,url:this.rsJsonapiConfig.url+t,headers:{"Content-Type":"application/vnd.api+json"}};o&&(i.data=o);var r=this.$http(i),s=this.$q.defer();return e.Core.Me.refreshLoadings(1),r.then(function(t){e.Core.Me.refreshLoadings(-1),s.resolve(t)},function(t){e.Core.Me.refreshLoadings(-1),s.reject(t)}),s.promise},t}();e.Http=t,angular.module("Jsonapi.services").service("JsonapiHttp",t)}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(t){var n=function(){function t(){this.paths=[],this.includes=[]}return t.prototype.addPath=function(t){this.paths.push(t)},t.prototype.setInclude=function(t){this.includes=t},t.prototype.get=function(){var t=[];return this.includes.length>0&&t.push("include="+this.includes.join(",")),this.paths.join("/")+(t.length>0?"/?"+t.join("&"):"")},t}();t.PathMaker=n}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(r){var e=function(){function e(){}return e.json_array2resources_array=function(e,n,o){void 0===o&&(o=!1),n||(n=[]);for(var t=0,a=0,i=e;a<i.length;a++){var s=i[a],c=r.Converter.json2resource(s,!1);o?n[c.id]=c:n[c.type+"_"+c.id]=c,t++}return n.$count=t,n},e.json_array2resources_array_by_type=function(r,n){var o={};e.json_array2resources_array(r,o,!1);var t={};return angular.forEach(o,function(r){r.type in t||(t[r.type]={}),t[r.type][r.id]=r}),t},e.json2resource=function(e,n){var o=r.Converter.getService(e.type);return o?r.Converter.procreate(o,e):void 0},e.getService=function(e){var n=r.Core.Me.getResource(e);return angular.isUndefined(n)&&console.warn("Jsonapi Resource type `"+e+"` is not registered."),n},e.procreate=function(r,e){"type"in e&&"id"in e||console.error("Jsonapi Resource is not correct",e);var n=new r.constructor;return n["new"](),n.id=e.id,n.attributes=e.attributes,n.is_new=!1,n},e}();r.Converter=e}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(s){var o=function(){function o(o,e){this.rsJsonapiConfig=o,this.JsonapiCoreServices=e,this.rootPath="http://reyesoft.ddns.net:9999/api/v1/companies/2",this.resources=[],this.loadingsCounter=0,this.loadingsStart=function(){},this.loadingsDone=function(){},s.Core.Me=this,s.Core.Services=e}return o.$inject=["rsJsonapiConfig","JsonapiCoreServices"],o.prototype._register=function(s){return s.type in this.resources?!1:(this.resources[s.type]=s,!0)},o.prototype.getResource=function(s){return this.resources[s]},o.prototype.refreshLoadings=function(s){this.loadingsCounter+=s,0===this.loadingsCounter?this.loadingsDone():1===this.loadingsCounter&&this.loadingsStart()},o.Me=null,o.Services=null,o}();s.Core=o,angular.module("Jsonapi.services").service("JsonapiCore",o)}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(t){var e=function(){function e(){this.path=null,this.params_base={id:"",include:[]},this.is_new=!0,this.relationships=[]}return e.prototype.clone=function(){var t=new this.constructor;for(var e in this)"object"!=typeof this[e]&&(t[e]=this[e]);return t},e.prototype.register=function(){if(null===t.Core.Me)throw"Error: you are trying register --> "+this.type+" <-- before inject JsonapiCore somewhere, almost one time.";return t.Core.Me._register(this)},e.prototype.getPath=function(){return this.path?this.path:this.type},e.prototype["new"]=function(){var t=this.clone();return t.reset(),t},e.prototype.reset=function(){var t=this;this.id="",this.attributes={},this.relationships={},angular.forEach(this.schema.relationships,function(e,a){t.relationships[a]={},t.relationships[a].data={}}),this.is_new=!0},e.prototype.toObject=function(t){var e={};return angular.forEach(this.relationships,function(t,a){e[a]={data:[]},angular.forEach(t.data,function(t){var i={id:t.id,type:t.type};e[a].data.push(i)})}),{data:{type:this.type,id:this.id,attributes:this.attributes,relationships:e},include:{}}},e.prototype.get=function(t,e,a,i){return this.__exec(t,e,a,i,"get")},e.prototype["delete"]=function(t,e,a,i){this.__exec(t,e,a,i,"delete")},e.prototype.all=function(t,e,a){return this.__exec(null,t,e,a,"all")},e.prototype.save=function(t,e,a){return this.__exec(null,t,e,a,"save")},e.prototype.__exec=function(t,e,a,i,n){switch(angular.isFunction(e)?(i=a,a=e,e=this.params_base):e=angular.isUndefined(e)?this.params_base:angular.extend({},this.params_base,e),a=angular.isFunction(a)?a:function(){},i=angular.isFunction(i)?i:function(){},n){case"get":return this._get(t,e,a,i);case"delete":return this._get(t,e,a,i);case"all":return this._all(e,a,i);case"save":return this._save(e,a,i)}},e.prototype._get=function(e,a,i,n){var r=new t.PathMaker;r.addPath(this.getPath()),r.addPath(e),a.include?r.setInclude(a.include):null;var s=this["new"](),o=t.Core.Services.JsonapiHttp.get(r.get());return o.then(function(e){var a=e.data.data;s.attributes=a.attributes,s.id=a.id,s.is_new=!1;var n={};"included"in e.data&&(n=t.Converter.json_array2resources_array_by_type(e.data.included,!1)),angular.forEach(a.relationships,function(e,a){if(!(a in s.relationships)&&"data"in e&&(console.warn(s.type+".relationships."+a+" received, but is not defined on schema."),s.relationships[a]={data:[]}),e.data&&e.data.length>0){var i=t.Converter.getService(e.data[0].type);if(i){angular.forEach(e.data,function(e){var r;r=e.type in n&&e.id in n[e.type]?n[e.type][e.id]:t.Converter.procreate(i,e),s.relationships[a].data[r.id]=r})}}}),i(e)},function(t){n(t)}),s},e.prototype._delete=function(e,a,i,n){var r=new t.PathMaker;r.addPath(this.getPath()),r.addPath(e);var s=t.Core.Services.JsonapiHttp["delete"](r.get());s.then(function(t){i(t)},function(t){n(t)})},e.prototype._all=function(e,a,i){var n=new t.PathMaker;n.addPath(this.getPath()),e.include?n.setInclude(e.include):null;var r={},s=t.Core.Services.JsonapiHttp.get(n.get());return s.then(function(e){t.Converter.json_array2resources_array(e.data.data,r,!0),a(e)},function(t){i(t)}),r},e.prototype._save=function(e,a,i){var n=this.toObject(e),r=new t.PathMaker;r.addPath(this.getPath()),this.id&&r.addPath(this.id),e.include?r.setInclude(e.include):null;var s=this["new"](),o=t.Core.Services.JsonapiHttp.exec(r.get(),this.id?"PUT":"POST",n);return o.then(function(t){var e=t.data.data;s.attributes=e.attributes,s.id=e.id,a(t)},function(t){i("data"in t?t.data:t)}),s},e.prototype.addRelationship=function(t,e){e=e?e:t.type,e in this.relationships||(this.relationships[e]={data:{}});var a=t.id;a||(a="new_"+Math.floor(1e5*Math.random())),this.relationships[e].data[a]=t},e.prototype.getService=function(){return t.Converter.getService(this.type)},e}();t.Resource=e}(Jsonapi||(Jsonapi={}));

var Jsonapi;!function(i){var n=function(){function i(i){this.JsonapiHttp=i}return i.$inject=["JsonapiHttp"],i}();i.CoreServices=n,angular.module("Jsonapi.services").service("JsonapiCoreServices",n)}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(n){var o=function(){function n(){}return n.prototype.toObject=function(n){return n},n}();n.JsonapiParser=o}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(n){var o=function(){function n(){}return n.prototype.get=function(n){},n.prototype.merge=function(n,o){},n}();n.JsonapiStorage=o}(Jsonapi||(Jsonapi={}));